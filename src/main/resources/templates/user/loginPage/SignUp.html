<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="/css/signup.css" />
    <link rel="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css">
    <meta charset="UTF-8">
    <title>회원가입</title>
    <script src="https://kit.fontawesome.com/f9358a6ceb.js" crossorigin="anonymous"></script>
</head>
<body>
<div id="wrap">
    <form action="/signup" method="post">
        <div class="line">
            <div id="top">
                <span id="title">회원가입</span>
            </div>
            <div id="middle">
                <div class="email">
                    <span class="eTitle">이메일</span>
                    <input type="email" id="member_email" name="member_email" required pattern="[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[a-zA-Z]([-_.]?[0-9a-zA-Z])*.[a-zA-Z]{2,3}"/>
                </div>
                <div class="password">
                    <span class="pwTitle">비밀번호</span>
                    <input type="password" id="member_pw" name="member_pw" required pattern="(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,16}"/>
                    <i class="fa fa-eye fa-lg" ></i>
                </div>
                <div class="password">
                        <span>
                            <div class="pwTitle">비밀번호</div>
                            <div class="pwTitle">재확인</div>
                        </span>
                    <input type="password" id="member_repw" name="member_repw" required pattern="(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,16}"/>
                    <i class="fa fa-eye fa-lg" ></i>
                </div>
                <div class="nickName">
                    <div class="nTitle">닉네임</div>
                    <input type="text" id="member_nick" name="member_nick" required pattern="(?=.*[a-z0-9가-힣])[a-z0-9가-힣]{2,16}"/>
                    <input type="button" id="nick_chk" onclick="uniqueChk()" value="중복확인">
                </div>
                <div class="birthday">
                    <div class="bTitle">생년월일</div>
                    <input type="text" id="member_birth1" name="birth1" placeholder="YYYY" required pattern="(19[[0-9][0-9]|20\d{2})"/>
                    <input type="text" id="member_birth2" name="birth2" placeholder="MM" required pattern="(0[0-9]|1[0-2])"/>
                    <input type="text" id="member_birth3" name="birth3" placeholder="DD" required pattern="(0[1-9]|[1-2][0-9]|3[0-1])"/>
                </div>
                <div class="gender" >
                    <div class="gTitle">성별</div>
                    <input type="radio" id="member_gender1" name="gender" value="male" /> 남성
                    <input type="radio" id="member_gender2" name="gender" value="female"/> 여성
                </div>
                <div class="phone">
                    <div class="phTitle">휴대폰번호</div>
                    <input type="text" id="member_phone" name="member_phone" placeholder="전화번호 입력" required pattern="(01([0|1|6|7|8|9])-?([0-9]{3,4})-?([0-9]{4}))"/>
                </div>
            </div>
            <div class="btn_bottom">
                <input type="submit" id="signup" value="가입하기">
            </div>
        </div>
    </form>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
function uniqueChk() {
    let member_nick = $('#member_nick').val();

    $.ajax({
        url: '/findByNick',
        data: {"member_nick":member_nick},
        type:'post',
        success: function(success) {
            console.log(success);
            if(member_nick.length < 1){
                alert("닉네임이 짧습니다.");
            } else if(success == 0){
                alert("닉네임으로 사용가능합니다");
            } else if(success == 1){
                alert("이미 사용중인 닉네임입니다.");
                return;
            }

        },
        error: function() {
            alert("error");
        }
    })
}
</script>
<script type="text/javascript" src="js/signUp.js"></script>
</body>
</html>